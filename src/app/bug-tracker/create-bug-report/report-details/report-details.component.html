<p-card
  [style]="{
    width: '450px',
    margin: '0 auto',
    padding: '10px 20px',
    minWidth: '360px'
  }"
  [style.width]="type ? '100%' : '50%'"
>
  <ng-template pTemplate="header">
    <h2 class="form__heading-text">Report Details</h2>
  </ng-template>
  <ng-template pTemplate="content">
    <form [formGroup]="fg" class="details__form" (ngSubmit)="onSubmit()">
      <div *ngIf="isTagged()" class="tagged-message">
        <small>
          <em
            >*This ticket is now under
            <strong>{{ description?.taggedByUser }}</strong></em
          >
        </small>
      </div>
      <div class="form__control">
        <label for="subject"
          >{{ fields["subject"]?.label }}
          <span
            class="invalid"
            *ngIf="
              (fields['subject']?.required && !type) ||
              (fields['subject']?.required &&
                this.currentUser === this.description?.user)
            "
            >*</span
          ></label
        >
        <input
          tourAnchor="report.subject"
          type="text"
          pInputText
          #subjectField
          formControlName="subject"
          id="subject"
        />
        <div class="invalidMessage" *ngIf="isRequired('subject')">
          Field is required!
        </div>
      </div>
      <div class="form__control-group">
        <div tourAnchor="report.severity"></div>
        <div class="form__control">
          <label for="severity"
            >{{ fields["severity"]?.label }}
            <span
              class="invalid"
              *ngIf="
                (fields['subject']?.required && !type) ||
                (fields['subject']?.required &&
                  this.currentUser === this.description?.user)
              "
              >*</span
            ></label
          >
          <p-dropdown
            [options]="severityOptions"
            [style]="{ width: '50%', minWidth: '362px' }"
            placeholder="--Select--"
            formControlName="severity"
            id="severity"
          ></p-dropdown>
          <div class="invalidMessage" *ngIf="isRequired('severity')">
            Field is required!
          </div>
        </div>
        <div class="form__control">
          <label for="status"
            >{{ fields["status"]?.label
            }}<span class="invalid" *ngIf="fields['status']?.required"
              >*</span
            ></label
          >
          <p-dropdown
            tourAnchor="report.status"
            (onChange)="updateDescriptionStore($event.value)"
            [options]="statusOptions"
            [style]="{ width: '50%', minWidth: '362px' }"
            formControlName="status"
            placeholder="--Select--"
            id="status"
          ></p-dropdown>
          <div class="invalidMessage" *ngIf="isRequired('status')">
            Field is required!
          </div>
        </div>
      </div>
      <div class="form__control">
        <label for="title"
          >{{ fields["describeTheBug"]?.label }}
          <span class="invalid" *ngIf="fields['describeTheBug']?.required"
            >*</span
          ></label
        >
        <textarea
          pInputTextarea
          formControlName="describeTheBug"
          tourAnchor="report.describe"
        ></textarea>
        <div class="invalidMessage" *ngIf="isRequired('describeTheBug')">
          Field is required!
        </div>
      </div>
      <div
        class="form__control confirm__box"
        *ngIf="currentUser !== description?.user && type"
      >
        <p-checkbox
          [binary]="true"
          inputId="binary"
          id="taggedBy"
          formControlName="taggedBy"
          (onChange)="isFixing = !isFixing"
        ></p-checkbox>
        <label for="taggedBy">Will fix it</label>
      </div>
      <div class="form__control" *ngIf="currentUser !== description?.user && type">
        <reportee-details
          [isFixing]="isFixing"
          (dueDate)="getDueDate($event)"
        ></reportee-details>
      </div>
      <div class="form__control">
        <ng-container *ngIf="!isTagged(); else viewButton">
          <button
            type="submit"
            pButton
            label="Submit"
            class="submit__btn"
          ></button>
        </ng-container>
      </div>
    </form>
  </ng-template>
</p-card>
<ng-template #viewButton>
  <button type="submit" pButton label="Close" class="submit__btn"></button>
</ng-template>
<p tourAnchor="report.submit" style="text-align: center; margin: 50px 0;">Dummy para</p>
